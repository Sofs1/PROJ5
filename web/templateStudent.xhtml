<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="./css/default.css"/>
        <h:outputStylesheet name="./css/cssLayout.css"/>
        <title>SelfEvaluation</title>
    </h:head>

    <h:body>
        <div id="top" align="right">
            <ui:insert name="top">
                <h:form>
                    <h:outputLabel value="Hi #{sessionController.user.name} | "/>
                    <h:commandLink action="editStudent" value="Edit" />&nbsp;|&nbsp;
                    <h:commandLink action="#{userController.removeUser()}" value="Delete" />&nbsp;|&nbsp;
                    <h:commandLink action="#{userController.logoutStud()}" value="LOGOUT" />
                </h:form>
            </ui:insert>
        </div>
        <div>
            <div id="left">
                <ui:insert name="left">
                    <h:form>
                        <h:commandButton value="OPEN PROJECTS" action="templateStudent"/>
                        <br></br>
                        <h:commandButton value="CLOSED PROJECTS" action="closedProjectStudent"/>
                        <br></br>
                        <h:commandButton value="REPORTS" action="reportsStudent"/>
                    </h:form>
                </ui:insert>
            </div>
            <div id="content" class="left_content">
                <ui:insert name="content">
                    <h1>OPEN PROJECTS</h1>

                    <h:panelGrid columns="3">

                        <h:panelGroup>
                            <h:form>
                                <h:dataTable value="#{viewProjectController.listOpenProjects()}" var="project" border="0" cellpadding="2" cellspacing="0">
                                    <h:column>
                                        <f:facet name="header" class="dataTableTitle">Project Name</f:facet>
                                            #{project.name}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header" class="dataTableTitle">Beginning Date</f:facet>
                                        <h:outputText value="#{project.begDate}">
                                            <f:convertDateTime type="date" pattern="dd-MM-yyyy" timeZone="Europe/Lisbon"/>
                                        </h:outputText>   
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header" class="dataTableTitle">End Date</f:facet>
                                        <h:outputText value="#{project.endDate}">
                                            <f:convertDateTime type="date" pattern="dd-MM-yyyy" timeZone="Europe/Lisbon"/>
                                        </h:outputText>   
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header" class="dataTableTitle">Evaluation</f:facet>
                                        <h:commandLink value="Open Evaluation" action="#{viewProjectController.openEvaluation(project)}"></h:commandLink>
                                    </h:column>
                                </h:dataTable>
                            </h:form>
                        </h:panelGroup>

                        <h:panelGroup binding="#{viewProjectController.evaluationPanel}" rendered="false">
                            <h:form>
                                <h:dataTable value="#{viewProjectController.studentEvaluations}" var="eval" border="0" cellpadding="2" cellspacing="0">
                                    <f:facet name="header">PROJECT #{viewProjectController.projectSelected.name}  MAX SCALE: #{viewProjectController.session}</f:facet>
                                    <h:column>   
                                        <f:facet name="header">Criteria</f:facet>
                                        <h:outputLabel value="#{eval.criteria.description}"/>
                                    </h:column>
                                    <h:column>   
                                        <f:facet name="header">Evaluation</f:facet>
                                        <h:inputText value="#{eval.note}"/>
                                    </h:column>
                                </h:dataTable>
                                <h:commandButton value="SUBMIT" action="#{viewProjectController.giveEvaluation()}"></h:commandButton>
                            </h:form>
                        </h:panelGroup>
                        <!--
                                                <h:panelGroup rendered="false">
                                                    <h:dataTable value="" var="media" border="0" cellpadding="2" cellspacing="0">
                                                        <h:column>
                                                            <f:facet name="Average">
                                                                <h:outputText value=""/>
                                                            </f:facet>
                                                            <h:outputText value=""/>
                                                        </h:column>
                                                    </h:dataTable>
                                                    <h:outputLabel value="Your evaluation was submitted"/>
                                                </h:panelGroup> -->

                    </h:panelGrid> 
                </ui:insert>
            </div>
        </div>
        <div id="bottom">
            <ui:insert name="bottom">@Made By Sofia &amp; Orlando</ui:insert>
        </div>

    </h:body>
</html>
